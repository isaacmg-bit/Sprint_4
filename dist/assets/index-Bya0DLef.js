(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const l=[],w=e=>e==="scoreButton1"?1:e==="scoreButton2"?2:e==="scoreButton3"?3:0,m=e=>{if(!e)return;const t=w(e),r=x(),s=new Date;l.push({joke:r??"Error fetching joke",score:t,date:s}),console.log(l)},f=[],y=async()=>{const e=await fetch("http://api.weatherapi.com/v1/current.json?key=ee7c31ce651d4b2596c114408251911&q=Barcelona/",{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Failed to fetch weather: ${e.status}`);return await e.json()},k=async()=>{const e=await y(),t=e.location.name,r=e.current.temp_c,s=e.current.condition.text,o=e.current.condition.icon;f.push({city:t,temp:r,condition:s,icon:o})},h=e=>{const t=document.querySelector("#jokebox");if(!t)throw new Error("The HTMLElement (p) does not exist!");t.textContent=e};let u=document.querySelector("#button");const E=e=>{u?.addEventListener("click",e)},j=document.querySelectorAll("#buttonContainer button");let d="";const g=()=>{d=""};j.forEach(e=>{e.addEventListener("click",()=>{d=e.id})});const C=()=>{const e=document.querySelector("#weatherbox"),t=document.createElement("IMG");if(document.querySelector("#weathercontainer")?.appendChild(t),!e)throw new Error("weatherbox not found");const r=f[0];if(!r){e.textContent="Error fetching weather";return}e.textContent=`${r.temp}ÂºC |`,t.setAttribute("src",`${r.icon}`)};let c=null;const x=()=>c,p=async()=>{try{if(!u)throw new Error("Button element not found in DOM!");if(Math.random()>.5){const t=await fetch("https://icanhazdadjoke.com/",{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Failed to fetch joke: ${t.status}`);const r=await t.json();if(!r.joke)throw new Error("Could not find the property 'joke' on the API response");return c=r.joke,h(c),{status:200,message:"OK!",joke:c}}else{const t=await fetch("https://api.chucknorris.io/jokes/random",{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Failed to fetch joke: ${t.status}`);const r=await t.json();if(!r.value)throw new Error("Could not find the property 'value' on the API response");return c=r.value,h(c),{status:200,message:"OK!",joke:c}}}catch(e){return{status:400,message:e instanceof Error?`Error: ${e.message}`:"Unknown error"}}};window.addEventListener("DOMContentLoaded",async()=>{try{await k(),C()}catch(e){console.error(e);const t=document.querySelector("#weatherbox");t&&(t.textContent="Failed to get the weather, sorry! Take a peek outisde your window for now.")}});p().then(e=>console.log(e));E(()=>{m(d),g(),p().then(e=>console.log(e))});const i=document.querySelector("#risitas");u?.addEventListener("click",()=>{i&&(i.classList.remove("hidden"),setTimeout(()=>{i.classList.add("hidden")},2200))});
